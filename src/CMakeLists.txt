add_subdirectory(core)

set(FLPL_PKG_CONFIG_FILE ${CMAKE_CURRENT_BINARY_DIR}/intflpl.pc)

set(FLPL_PKG_CONFIG_CFLAGS "-I\${includedir}/ibex -I\${includedir}/intflpl")
set(FLPL_PKG_CONFIG_LIBS "-L\${libdir}/intflpl -lintflpl")

file(GENERATE OUTPUT ${FLPL_PKG_CONFIG_FILE}
              CONTENT "prefix=${CMAKE_INSTALL_PREFIX}
includedir=\${prefix}/${CMAKE_INSTALL_INCLUDEDIR}
libdir=\${prefix}/${CMAKE_INSTALL_LIBDIR}

Name: intflpl
Description: ${PROJECT_DESCRIPTION}
Url: 
Version: ${PROJECT_VERSION}
Requires: ibex
Cflags: ${FLPL_PKG_CONFIG_CFLAGS}
Libs: ${FLPL_PKG_CONFIG_LIBS}")

install(FILES ${FLPL_PKG_CONFIG_FILE} DESTINATION ${CMAKE_INSTALL_PKGCONFIG})



set(FLPL_CMAKE_CONFIG_FILE ${CMAKE_CURRENT_BINARY_DIR}/intflpl-config.cmake)

file(WRITE ${FLPL_CMAKE_CONFIG_FILE}
           "# Try to find Intflpl
# This file has been generated by CMake

find_path(INTFLPL_INCLUDE_DIR intflpl.h
          PATH_SUFFIXES include/intflpl)

find_library(INTFLPL_LIBRARY NAMES intflpl
             PATH_SUFFIXES lib)

set(INTFLPL_VERSION ${PROJECT_VERSION})
set(INTFLPL_LIBRARIES \${INTFLPL_LIBRARY})
set(INTFLPL_INCLUDE_DIRS \${INTFLPL_INCLUDE_DIR})

set(INTFLPL_C_FLAGS \"\")
set(INTFLPL_CXX_FLAGS \"\")
")

install(FILES ${FLPL_CMAKE_CONFIG_FILE} DESTINATION ${CMAKE_INSTALL_CMAKE})
